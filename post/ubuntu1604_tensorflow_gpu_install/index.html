<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ubuntu16.04å®‰è£…TensorFlow-GPU | ä¸æƒ³é•¿å¤§çš„çŸ³å¤´</title>
<meta name="description" content="" />
<link rel="shortcut icon" href="https://jianhuchen-test.github.io//favicon.ico?v=1574224041724">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://jianhuchen-test.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://jianhuchen-test.github.io/">
  <img class="avatar" src="https://jianhuchen-test.github.io//images/avatar.png?v=1574224041724" alt="">
  </a>
  <h1 class="site-title">
    ä¸æƒ³é•¿å¤§çš„çŸ³å¤´
  </h1>
  <p class="site-description">
    
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          ğŸŒˆé¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          ğŸ“ƒ å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          ğŸ· æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          ğŸ‘¨â€ğŸ’» å…³äº &amp; ç•™è¨€
        </a>
      
    
      
        <a href="/post/share/" class="menu">
          ğŸ‘ å…±äº«èµ„æº
        </a>
      
    
      
        <a href="/post/friends/" class="menu">
          ğŸ»å‹é“¾
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/jianhuchen" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              ubuntu16.04å®‰è£…TensorFlow-GPU
            </h2>
            <div class="post-info">
              <span>
                2018-11-28
              </span>
              <span>
                6 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="ä¸€äº›åºŸè¯">ä¸€äº›åºŸè¯</h2>
<p>æˆ‘æ„Ÿè§‰æˆ‘çš„å®‰è£…è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒé¡ºåˆ©å“’ï¼Œä¸Šåˆåä¸€ç‚¹å¤šå¼€å§‹å®‰è£…ï¼Œåˆ°åäºŒç‚¹å¤šå°±å®‰è£…å¥½äº†ï¼Œé¡ºä¾¿å†™ä¸‹äº†è¿™ç¯‡è®°å½•ï¼Œä¾›å¤§å®¶åšå‚è€ƒå§ï¼Œä¹Ÿæ–¹ä¾¿æ—¥åè‡ªå·±é‡è£…ç³»ç»Ÿï¼ˆå‘€ï¼æ‰‹æ¬ ï¼ï¼ï¼‰ä¹‹åå®‰è£…çš„æ—¶å€™è¿˜èƒ½å†çœ‹çœ‹</p>
<p>æˆ‘åœ¨æˆ‘çš„ç¬”è®°æœ¬ä¸Šè£…çš„ï¼Œè™½ç„¶ç¬”è®°æœ¬ä¸Šè·‘GPUæœ‰ç‚¹èµ¶é¸­å­ä¸Šæ¶çš„æ„Ÿè§‰ï¼Œä½†æ€»æ¯”åœ¨cpuä¸Šç¡¬è·‘å¥½ä¸€ä¸¢ä¸¢ï¼Œæœ‰æ—¶å€™ç¡®å®ä¼šæ–¹ä¾¿å¾ˆå¤š</p>
<p>æˆ‘çš„ç³»ç»Ÿï¼šUbuntu16.04ï¼ŒGPUï¼šGeForce GTX 850M</p>
<p>å¼€å§‹æ­£é¢˜...</p>
<h2 id="ç¡¬ä»¶éœ€æ±‚">ç¡¬ä»¶éœ€æ±‚</h2>
<p>æ ¹æ®<a href="https://www.tensorflow.org/install/gpu">tensorflowå®˜æ–¹æ–‡æ¡£</a>ï¼Œtensorflow-gpuç‰ˆæœ¬åªèƒ½åœ¨ä¸‹é¢çš„æ˜¾å¡ä¸Šé¢è·‘ï¼š</p>
<ul>
<li>å…·æœ‰CUDAÂ®è®¡ç®—èƒ½åŠ›3.5æˆ–æ›´é«˜ç‰ˆæœ¬çš„NVIDIAÂ®GPUå¡ã€‚è¯·å‚é˜…<a href="https://developer.nvidia.com/cuda-gpus">æ”¯æŒCUDAçš„GPUå¡</a>åˆ—è¡¨ ã€‚</li>
</ul>
<p>æ˜¯çš„ï¼Œåªæœ‰Nå¡...</p>
<h2 id="è½¯ä»¶éœ€æ±‚">è½¯ä»¶éœ€æ±‚</h2>
<p>æ ¹æ®<a href="https://www.tensorflow.org/install/gpu">tensorflowå®˜æ–¹æ–‡æ¡£</a>ï¼Œéœ€è¦ä»¥ä¸‹å‡ ä¸ªè½¯ä»¶ï¼šNVIDIAé©±åŠ¨ã€Nvidia CUDA9.0ã€cuDNN SDK (&gt;= 7.2)ï¼Œæ¥ä¸‹æ¥å’±ä»¬ä¸€ä¸ªä¸ªçš„å®‰è£…</p>
<h3 id="nvidiaé©±åŠ¨">NVIDIAé©±åŠ¨</h3>
<ul>
<li>NVIDIAÂ® GPU drivers â€”CUDA 9.0 requires 384.x or higher.<br>
è‹±ä¼Ÿè¾¾çš„æ˜¾å¡é©±åŠ¨ï¼Œå¾…ä¼šå„¿å’±ä»¬è¦å®‰è£…CUDAï¼Œç‰ˆæœ¬ä¸º9.0ï¼Œæ‰€ä»¥éœ€è¦ä½ çš„é©±åŠ¨ç‰ˆæœ¬åœ¨384.*æˆ–è€…æ›´é«˜</li>
</ul>
<h4 id="å®‰è£…">å®‰è£…</h4>
<p>è¿™é‡Œæ˜¯ä¸€ç§æœ€ç®€å•çš„æ–¹æ³•ï¼Œå› ä¸ºæ¡Œé¢ç‰ˆçš„Ubuntuæ¯”è¾ƒæ–¹ä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨ç³»ç»Ÿè®¾ç½®å®Œæˆã€‚</p>
<p>é¦–å…ˆæ‰“å¼€terminalï¼Œè¾“å…¥</p>
<pre><code class="language-shell">sudo apt-get update
</code></pre>
<p>ç„¶åï¼Œæ‰“å¼€<code>ç³»ç»Ÿè®¾ç½®</code>-&gt;<code>è½¯ä»¶å’Œæ›´æ–°</code>-&gt;<code>é™„åŠ é©±åŠ¨</code>-&gt;<code>é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬å®‰è£…</code>ï¼Œè¿™ä¸ªå®‰è£…å®Œæˆä¹‹åéœ€è¦é‡å¯ç”µè„‘</p>
<img src="http://img.cjh.zone/NVIDIA_drivers_v384_or_higher.png" alt="NVIDIA_drivers_v384_or_higher" width=400>
<h4 id="éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ">éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</h4>
<p>é‡å¯ä¹‹ååœ¨terminalé‡Œè¾“å…¥</p>
<pre><code class="language-shell">nvidia-smi
</code></pre>
<p>å‡ºç°ä¸‹é¢çš„ç±»ä¼¼æƒ…å†µè¡¨ç¤ºå®‰è£…æˆåŠŸ</p>
<img src="http://img.cjh.zone/driver_install_success.png" alt="driver_install_success" width=400>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘çš„ç‰ˆæœ¬æ˜¯384.130ï¼Œæ»¡è¶³è¦æ±‚ï¼</p>
<h3 id="nvidia-cuda90">Nvidia CUDA9.0</h3>
<h4 id="å®‰è£…-2">å®‰è£…</h4>
<p>CUDA9.0:ä¸‹è½½åœ°å€ï¼š<a href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a></p>
<img src="http://img.cjh.zone/CUDA-download.png" alt="CUDA-download" width=400>
<p>æˆ‘ä¸‹è½½çš„æ˜¯**<code>.deb</code>çš„æœ¬åœ°å®‰è£…åŒ…**ï¼Œä¸‹è½½å®Œæˆåçš„å®‰è£…æ–¹æ³•ï¼š</p>
<pre><code class="language-bash"># é¦–å…ˆåˆ‡æ¢åˆ°ä½ å­˜æ”¾å®‰è£…åŒ…çš„åœ°æ–¹ï¼Œä¸€èˆ¬é»˜è®¤æ”¾åœ¨ç”¨æˆ·çš„Downloadæ–‡ä»¶å¤¹ä¸‹
cd ~/Downloads/
sudo dpkg -i cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb
# æ³¨æ„è¿™é‡Œçš„&lt;version&gt;ï¼Œè¡¨ç¤ºä½ å®‰è£…çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘è¦æ›¿æ¢æˆ9-0-local
# å¦‚æœä½ ä¸çŸ¥é“ä½ çš„ç‰ˆæœ¬è¯¥æ€ä¹ˆå†™ï¼Œé‚£å°±cdåˆ°/varè·¯å¾„ä¸‹çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶å¤¹çš„åå­—å§ï¼Œåå­—é‡Œé¢æœ‰ç‰ˆæœ¬å·
sudo apt-key add /var/cuda-repo-&lt;version&gt;/7fa2af80.pub
# æˆ‘å¯¹åº”çš„æ›¿æ¢æ‰ç‰ˆæœ¬å·ä¹‹åçš„å‘½ä»¤ï¼š
# sudo apt-key add /var/cuda-repo-9-0-local/7fa2af80.pub
sudo apt-get update
sudo apt-get install cuda
</code></pre>
<h4 id="æ·»åŠ ç¯å¢ƒå˜é‡">æ·»åŠ ç¯å¢ƒå˜é‡</h4>
<p>å®‰è£…å®Œæˆä¹‹åéœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-shell"># ç”¨geditæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ä»–åé¢è¿½åŠ å†…å®¹
gedit ~/.bashrc
</code></pre>
<p>åœ¨æœ«å°¾è¿½åŠ å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-shell"># cuda
export PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}
export LD_LIBRARY_PATH=/usr/local/cuda-9.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
</code></pre>
<p>å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<img src="http://img.cjh.zone/add-cuda-path.png" alt="add-cuda-path" width=400>
<p>ç„¶åæ‰“å¼€terminalï¼Œä½¿ç”¨<code>source ~/.bashrc</code>ï¼Œä½¿æˆ‘ä»¬åˆšæ‰çš„æ›´æ”¹ç«‹å³ç”Ÿæ•ˆ</p>
<pre><code class="language-shell">source ~/.bashrc
</code></pre>
<h4 id="éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ-2">éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</h4>
<pre><code class="language-shell">nvcc -V
</code></pre>
<p>å¦‚æœå‡ºç°ä¸‹å›¾ç±»ä¼¼çš„æç¤ºè¡¨ç¤ºå®‰è£…æˆåŠŸ</p>
<img src="http://img.cjh.zone/cuda-install-success.png" alt="cuda-install-success" width=400>
<h3 id="cudnn-sdk-72">cuDNN SDK (&gt;= 7.2)</h3>
<p>ä¸‹è½½cudnnï¼šhttps://developer.nvidia.com/rdp/cudnn-download</p>
<blockquote>
<p>æ³¨æ„ï¼šä¸Šé¢çš„æ“ä½œéœ€è¦ç™»å½•ï¼Œå¦‚æœæ²¡æœ‰è´¦å·çš„è¯å°±æ³¨å†Œä¸€ä¸ª</p>
</blockquote>
<p>cuDNNè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œ<a href="https://www.tensorflow.org/install/gpu">tensorflowå®˜æ–¹</a>è¦æ±‚å®ƒçš„ç‰ˆæœ¬&gt;=7.2ï¼Œæ³¨æ„è¿˜è¦ä¸<strong>CUDAçš„ç‰ˆæœ¬</strong>å¯¹åº”å“¦ï½</p>
<img src="http://img.cjh.zone/cudnn.png" alt="cudnn" width=400>
<h4 id="å®‰è£…-3">å®‰è£…</h4>
<p>è¿™é‡Œçš„å®‰è£…è¿‡ç¨‹è·Ÿæˆ‘åœ¨windowsä¸Šå®‰è£…cuDNNçš„è¿‡ç¨‹åŸºæœ¬ä¸€æ ·ï¼Œå°±æ˜¯å¤åˆ¶æ–‡ä»¶...</p>
<pre><code class="language-shell"># é¦–å…ˆåˆ‡æ¢åˆ°ä½ å­˜æ”¾cuDNNå®‰è£…åŒ…çš„åœ°æ–¹ï¼Œä¸€èˆ¬é»˜è®¤æ”¾åœ¨ç”¨æˆ·çš„Downloadæ–‡ä»¶å¤¹ä¸‹
cd ~/Downloads/
# è§£å‹ä¸‹è½½çš„cuDNNå‹ç¼©åŒ…
tar xvzf cudnn-9.0-linux-x64-v7.4.1.5.tgz
# å°†è§£å‹çš„æ–‡ä»¶å¤åˆ¶åˆ°å¯¹åº”çš„cudaçš„å®‰è£…è·¯å¾„ä¸‹ï¼Œå¤åˆ¶å®Œè§£å‹çš„æ–‡ä»¶å°±å¯ä»¥åˆ æ‰äº†
sudo cp cuda/include/cudnn.h /usr/local/cuda/include
sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64
# æ‰€æœ‰ç”¨æˆ·æ·»åŠ è¯»æƒé™
sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*
</code></pre>
<p>æ¡Œé¢ç‰ˆçš„Ubuntuä¸­ï¼Œä»¥ä¸Šæ“ä½œå…¶å®éƒ½å¯ä»¥ä½¿ç”¨é¼ æ ‡ç‚¹å‡»å®Œæˆ...</p>
<h2 id="tensorflow-gpu">tensorflow-gpu</h2>
<p>æˆ‘ä½¿ç”¨pipç›´æ¥å®‰è£…ï¼Œå®‰è£…ä¹‹å‰éœ€è¦ä½ ç¡®è®¤ä½ çš„ç³»ç»Ÿé‡Œé¢æœ‰<code>python3</code>å’Œå¯¹åº”çš„<code>pip</code>ï¼ˆubuntu 16.04é»˜è®¤å®‰è£…<code>Python 2.7.12</code>å’Œ<code>Python 3.5.2</code>ï¼‰ï¼ŒéªŒè¯æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>éªŒè¯python3ï¼š</p>
<pre><code class="language-shell">python3 -V
# æ˜¾ç¤ºå‡ºç‰ˆæœ¬å·å°±è¡¨ç¤ºå·²ç»å®‰è£…äº†
</code></pre>
<p>éªŒè¯pip3ï¼š</p>
<pre><code class="language-shell">pip3 -V
# æ˜¾ç¤ºå‡ºç‰ˆæœ¬å·å°±è¡¨ç¤ºå·²ç»å®‰è£…äº†
# Ubuntué»˜è®¤æ²¡æœ‰å®‰è£…pipï¼Œå¦‚æœä½ ä¹Ÿæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…
sudo apt-get install python3-pip
</code></pre>
<h3 id="å®‰è£…-4">å®‰è£…</h3>
<pre><code class="language-shell"># æŒ‡å®šé˜¿é‡Œé•œåƒæºï¼Œå¬è¯´ä¼šå¿«å¥½å¤š
sudo pip3 install --index-url https://mirrors.aliyun.com/pypi/simple tensorflow-gpu
</code></pre>
<img src="http://img.cjh.zone/install-tensorflow-gpu.png" alt="install-tensorflow-gpu" width=400>
<h3 id="éªŒè¯å¦å®‰è£…æˆåŠŸ">éªŒè¯å¦å®‰è£…æˆåŠŸ</h3>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨<a href="https://www.tensorflow.org/guide/using_gpu">å®˜ç½‘çš„ä¾‹å­</a>æ¥æµ‹è¯•ä¸€ä¸‹</p>
<p>åˆ°æ¡Œé¢æ–°å»ºä¸€ä¸ª<code>tensorflow-gpu-test.py</code>æ–‡ä»¶ï¼Œç„¶åå¡«ä¸Šå¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="language-python">import tensorflow as tf

# Creates a graph.
a = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')
b = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')
c = tf.matmul(a, b)

# Creates a session with log_device_placement set to True.
sess = tf.Session(config=tf.ConfigProto(log_device_placement=True))

# Runs the op.
print(sess.run(c))
</code></pre>
<p>æ‰“å¼€terminalï¼Œæ‰§è¡Œä¸€ä¸‹åˆšæ‰çš„ç¨‹åº</p>
<pre><code class="language-shell">python3 ~/Desktop/tensorflow-gpu-test.py
</code></pre>
<p>å¦‚æœä½ çœ‹åˆ°å¦‚ä¸‹çš„æ•ˆæœå°±è¡¨ç¤ºå®‰è£…æˆåŠŸå•¦ï½</p>
<pre><code class="language-shell">Device mapping:
/job:localhost/replica:0/task:0/device:GPU:0 -&gt; device: 0, name: Tesla K40c, pci bus
id: 0000:05:00.0
b: /job:localhost/replica:0/task:0/device:GPU:0
a: /job:localhost/replica:0/task:0/device:GPU:0
MatMul: /job:localhost/replica:0/task:0/device:GPU:0
[[ 22.  28.]
 [ 49.  64.]]
</code></pre>
<img src="http://img.cjh.zone/test.png" alt="test" width=400>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p>https://www.tensorflow.org/install/gpu</p>
<p>https://github.com/tensorflow/tensorflow/blob/master/README.md</p>
<p>http://blog.51cto.com/moerjinrong/2175362</p>
<p>https://blog.csdn.net/zhaoyu106/article/details/52793183</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80%E4%BA%9B%E5%BA%9F%E8%AF%9D">ä¸€äº›åºŸè¯</a></li>
<li><a href="#%E7%A1%AC%E4%BB%B6%E9%9C%80%E6%B1%82">ç¡¬ä»¶éœ€æ±‚</a></li>
<li><a href="#%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82">è½¯ä»¶éœ€æ±‚</a>
<ul>
<li><a href="#nvidia%E9%A9%B1%E5%8A%A8">NVIDIAé©±åŠ¨</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…</a></li>
<li><a href="#%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F">éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</a></li>
</ul>
</li>
<li><a href="#nvidia-cuda90">Nvidia CUDA9.0</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85-2">å®‰è£…</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">æ·»åŠ ç¯å¢ƒå˜é‡</a></li>
<li><a href="#%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F-2">éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</a></li>
</ul>
</li>
<li><a href="#cudnn-sdk-72">cuDNN SDK (&gt;= 7.2)</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85-3">å®‰è£…</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tensorflow-gpu">tensorflow-gpu</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85-4">å®‰è£…</a></li>
<li><a href="#%E9%AA%8C%E8%AF%81%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F">éªŒè¯å¦å®‰è£…æˆåŠŸ</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://jianhuchen-test.github.io//post/windows_ubuntu_time_synchronize">
              <h3 class="post-title">
                Windowsä¸Ubuntuæ—¶é—´ä¸åŒæ­¥çš„è§£å†³æ–¹æ¡ˆ
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '13244a83a82befebfcfd',
    clientSecret: 'c583df657426ac6aa4051674839478a647b5ae96',
    repo: 'jianhuchen-test.github.io',
    owner: 'jianhuchen-test',
    admin: ['jianhuchen-test'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
   | 
  <a class="rss" href="https://jianhuchen-test.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
